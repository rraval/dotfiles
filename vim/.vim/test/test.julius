// works
function foo() {
  var x = #{x $ f "x"}

  $.ajax("someurl", function(data) {
    // do callback
    var url='@{RouteR $ var}?term=x';
    var url=@{RouteR $ var};
    var url="@{RouteR $ var}";
  });

  alert("some alert");

  function test() {
    ^{functionBody "x"}
  }
}
